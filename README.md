# BIGS โ Portfolio & Budget Management System

> **ะะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝะฐั ัะธััะตะผะฐ ัะฟัะฐะฒะปะตะฝะธั ะฟะพัััะตะปะตะผ ะธ ะฑัะดะถะตัะพะผ**: FastAPI backend + ัะพะฒัะตะผะตะฝะฝัะน ััะพะฝัะตะฝะด (HTML/JS/CSS) + PostgreSQL + Redis + Nginx. ะะบะปััะฐะตั ะผะพะดัะปะธ ะดะปั ะธะฝะฒะตััะธัะธะน, ะฑัะดะถะตัะธัะพะฒะฐะฝะธั ะธ ัะฟัะฐะฒะปะตะฝะธั ะพะฑัะทะฐัะตะปัััะฒะฐะผะธ. ะะพะปะฝะพัััั ะฒ Docker ั ะฟะพะดะดะตัะถะบะพะน ะฟัะพะดะฐะบัะตะฝะฐ.

---

## ะกะพะดะตัะถะฐะฝะธะต
- [ะคัะฝะบัะธะพะฝะฐะปัะฝะพััั](#ััะฝะบัะธะพะฝะฐะปัะฝะพััั)
- [ะััะธัะตะบัััะฐ](#ะฐััะธัะตะบัััะฐ)
- [ะัััััะน ััะฐัั (ะปะพะบะฐะปัะฝะพ)](#ะฑัััััะน-ััะฐัั-ะปะพะบะฐะปัะฝะพ)
- [ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั](#ะฟะตัะตะผะตะฝะฝัะต-ะพะบััะถะตะฝะธั)
- [API Endpoints](#api-endpoints)
- [URL-ั ะธ ะทะดะพัะพะฒัะต](#url-ั-ะธ-ะทะดะพัะพะฒัะต)
- [ะะฐะบ ะฟัะพะฒะตัะธัั Redis](#ะบะฐะบ-ะฟัะพะฒะตัะธัั-redis)
- [ะะตะฟะปะพะน ะฝะฐ ัะตัะฒะตั](#ะดะตะฟะปะพะน-ะฝะฐ-ัะตัะฒะตั)
- [ะะฑะฝะพะฒะปะตะฝะธะต ัะตะปะธะทะฐ](#ะพะฑะฝะพะฒะปะตะฝะธะต-ัะตะปะธะทะฐ)
- [ะััะฝัะต ะบะพะผะฐะฝะดั](#ัััะฝัะต-ะบะพะผะฐะฝะดั)
- [ะขัะฐะฑะปัััะธะฝะณ](#ััะฐะฑะปัััะธะฝะณ)
- [ะกัััะบัััะฐ ัะตะฟะพะทะธัะพัะธั](#ััััะบัััะฐ-ัะตะฟะพะทะธัะพัะธั)

---

## ะคัะฝะบัะธะพะฝะฐะปัะฝะพััั

### ๐ฆ **ะะพะดัะปั ะธะฝะฒะตััะธัะธะน**
- **ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพัััะตะปะตะผ** - ะดะพะฑะฐะฒะปะตะฝะธะต/ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฐะบัะธะฒะพะฒ
- **ะะฝัะตะณัะฐัะธั ั Tinkoff Invest API** - ะฐะฒัะพะผะฐัะธัะตัะบะพะต ะฟะพะปััะตะฝะธะต ะบะพัะธัะพะฒะพะบ
- **ะะธะทัะฐะปะธะทะฐัะธั** - ะณัะฐัะธะบะธ ะฐะปะปะพะบะฐัะธะธ ะฟะพ ะบะปะฐััะฐะผ ะธ ัะธะบะตัะฐะผ
- **ะัะพะณะพะฒัะต ะฟะปะฐัะบะธ** - ะพะฑัะฐั ััะพะธะผะพััั, ะฐะบัะธะธ, ะะคะ, ัะพะฝะดั
- **ะะพะธัะบ ะธ ัะธะปัััะฐัะธั** - ะฑัััััะน ะฟะพะธัะบ ะฟะพ ะฟะพะทะธัะธัะผ

### ๐ฐ **ะะพะดัะปั ะฑัะดะถะตัะธัะพะฒะฐะฝะธั**
- **ะฃัะตั ะดะพัะพะดะพะฒ ะธ ัะฐััะพะดะพะฒ** - ะบะฐัะตะณะพัะธะธ, ััะตัะฐ, ััะฐะฝะทะฐะบัะธะธ
- **ะะตัััะฝะฐั ะฐะฝะฐะปะธัะธะบะฐ** - ัะฒะพะดะบะธ ะฟะพ ะฟะตัะธะพะดะฐะผ
- **ะะธะทัะฐะปะธะทะฐัะธั** - ะณัะฐัะธะบะธ ะดะพัะพะดะพะฒ/ัะฐััะพะดะพะฒ
- **ะฃะฟัะฐะฒะปะตะฝะธะต ััะตัะฐะผะธ** - ะฝะฐะปะธัะฝัะต, ะบะฐััั, ัะฑะตัะตะถะตะฝะธั
- **ะะฐัะตะณะพัะธะธ** - ะณะธะฑะบะฐั ัะธััะตะผะฐ ะบะฐัะตะณะพัะธะทะฐัะธะธ

### ๐ **ะะพะดัะปั ะพะฑัะทะฐัะตะปัััะฒ**
- **ะัะตะดะธัะฝัะต ะพะฑัะทะฐัะตะปัััะฒะฐ** - ะธะฟะพัะตะบะฐ, ะบัะตะดะธัั, ะทะฐะนะผั
- **ะะปะฐะฝะธัะพะฒะฐะฝะธะต ะฟะปะฐัะตะถะตะน** - ะณัะฐัะธะบ, ะฟัะพัะตะฝัั, ัะตะปะพ ะบัะตะดะธัะฐ
- **ะััะปะตะถะธะฒะฐะฝะธะต ะฟัะพะณัะตััะฐ** - ะพะฟะปะฐัะตะฝะฝะฐั/ะพััะฐะฒัะฐััั ััะผะผะฐ
- **ะัะพะณะพะฒัะต ะฟะปะฐัะบะธ** - ะพะฑัะฐั ััะผะผะฐ, ะบัะตะดะธัั, ะพะฟะปะฐัะตะฝะพ, ะพััะฐะปะพัั
- **ะะพะดะฐะปัะฝัะต ะพะบะฝะฐ** - ัะดะพะฑะฝะพะต ะดะพะฑะฐะฒะปะตะฝะธะต ะธ ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต

### ๐ **ะกะธััะตะผะฐ ะฑะตะทะพะฟะฐัะฝะพััะธ**
- **JWT ะฐััะตะฝัะธัะธะบะฐัะธั** - ะฑะตะทะพะฟะฐัะฝัะน ะฒัะพะด/ัะตะณะธัััะฐัะธั
- **Rate limiting** - ะทะฐัะธัะฐ ะพั ะทะปะพัะฟะพััะตะฑะปะตะฝะธะน
- **Redis ะบััะธัะพะฒะฐะฝะธะต** - ะพะฟัะธะผะธะทะฐัะธั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
- **CORS ะฝะฐัััะพะนะบะธ** - ะฑะตะทะพะฟะฐัะฝัะต ะทะฐะฟัะพัั

---

## ะััะธัะตะบัััะฐ

**ะกะตัะฒะธัั (Docker Compose):**
- **db** โ `postgres:16-alpine` (ะฟะตััะธััะตะฝัะฝัะน ัะพะผ `pg_data`).
- **cli-flyway / flyway** โ ะผะธะณัะฐัะธะธ ััะตะผั (`/env/pgsql/migrations`). ะะฐะฟััะบะฐัััั 1 ัะฐะท ะฟัะธ ััะฐััะต.
- **redis** โ `redis:7-alpine`, ะธัะฟะพะปัะทัะตััั ะดะปั ะบััะฐ ะธ ะฟัะพััะพะณะพ rateโlimit.
- **backend** โ FastAPI (`app/backend`), Uvicorn. ะะฐะฑะพัะฐะตั ะฟะพ `:8000`.
- **frontend**  
  - ะปะพะบะฐะปัะฝะพ โ `nginx:alpine` + ะบะพะฝัะธะณ `env/frontend/local.conf` (ััะฐัะธัะตัะบะธะต ัะฐะนะปั ะธะท `app/frontend`, ะฟัะพะบัะธ `/api -> backend`);
  - ะฒ ะฟัะพะดะต โ ััะพะฝัะตะฝะด ะบะปะฐะดัััั ะฒ ัะพะผ `frontend_volume`, ะฐ ะฒะฝะตัะฝะธะน **nginx** ะพัะดะฐัั ััะฐัะธะบั ะธ ะฟัะพะบัะธั API.
- **nginx (prod)** โ ะฒะฝะตัะฝะธะน ะฒะตะฑโัะตัะฒะตั (80/443), SSL ะธะท `./certbot/conf`, ััะฐัะธะบะฐ ะธะท ัะพะผะฐ `frontend_volume`, ะฟัะพะบัะธ ะฝะฐ `backend`.
- **certbot (prod)** โ ะฟะพะปััะตะฝะธะต/ะพะฑะฝะพะฒะปะตะฝะธะต ัะตััะธัะธะบะฐัะพะฒ Letโs Encrypt ัะตัะตะท webroot.

---

## ะัััััะน ััะฐัั (ะปะพะบะฐะปัะฝะพ)

1) **ะะพะดะณะพัะพะฒั `.env` ะฒ ะบะพัะฝะต** (ัะผ. ัะฐะทะดะตะป ะฝะธะถะต). ะัะธะผะตั ะทะฝะฐัะตะฝะธะน ะดะปั ะปะพะบะฐะปะบะธ ัะถะต ะฟะพะดัะพะดะธั:
```env
POSTGRES_USER=bigs
POSTGRES_PASSWORD=bigs_pass
POSTGRES_DB=bigsdb
DATABASE_URL=postgresql+psycopg2://bigs:bigs_pass@db:5432/bigsdb
REDIS_URL=redis://bigs-redis:6379/0
ALLOWED_ORIGINS=http://localhost:8080,http://127.0.0.1:8080
BACKEND_PORT=8000
APP_PORT=8080
TZ=Europe/Moscow
DEBUG=True
LOG_LEVEL=DEBUG
```

2) **ะะฐะฟัััะธ ะบะพะฝัะตะนะฝะตัั:**
```bash
docker compose up -d --build
```

3) **ะัะบัะพะน:**
- ะคัะพะฝัะตะฝะด: http://localhost:8080  
- API (ะปะพะบะฐะปัะฝะพ): http://127.0.0.1:8000/docs

> ะ ะปะพะบะฐะปัะฝะพะผ `frontend` nginxโะบะพะฝัะธะณ (`env/frontend/local.conf`) ะฟัะพะบัะธััะตั ะทะฐะฟัะพัั ั `/api/*` ะฝะฐ `backend`.

4) **ะััะฐะฝะพะฒะธัั:**
```bash
docker compose down
```

---~

## ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

ะัะฝะพะฒะฝัะต (ัะฐะนะป `.env` ะฒ ะบะพัะฝะต):
- **DB**
  - `POSTGRES_USER`, `POSTGRES_PASSWORD`, `POSTGRES_DB`
  - `DATABASE_URL` โ ัััะพะบะฐ ะฟะพะดะบะปััะตะฝะธั ะดะปั ะฑะตะบะตะฝะดะฐ, ะฝะฐะฟัะธะผะตั `postgresql+psycopg2://bigs:bigs_pass@db:5432/bigsdb`
- **REDIS**
  - `REDIS_URL` โ `redis://bigs-redis:6379/0`
- **SECURITY / CORS**
  - `SECRET_KEY`, `ALGORITHM` (ะฟะพ ัะผะพะปัะฐะฝะธั `HS256`), `ACCESS_TOKEN_EXPIRE_MINUTES`
  - `ALLOWED_ORIGINS` โ ัะฟะธัะพะบ ะดะพะผะตะฝะพะฒ ัะตัะตะท ะทะฐะฟัััั
- **APP**
  - `BACKEND_PORT` (ะพะฑััะฝะพ `8000`), `APP_PORT` (ะปะพะบะฐะปัะฝัะน ััะพะฝั `8080`), `TZ`
  - `DEBUG`, `LOG_LEVEL`
- **(ะพะฟัะธะพะฝะฐะปัะฝะพ)** Tinkoff API
  - `TINKOFF_API_TOKEN` / `TINKOFF_TOKEN`

SQLโะฟัะป (ะพะฟัะธะพะฝะฐะปัะฝะพ, ัะถะต ัััะตะฝะพ ะฒ ะบะพะดะต):
- `SQL_POOL_SIZE`, `SQL_MAX_OVERFLOW`, `SQL_POOL_RECYCLE`, `SQL_POOL_TIMEOUT`

---

## API Endpoints

### ๐ **ะััะตะฝัะธัะธะบะฐัะธั**
- `POST /auth/login` - ะฒัะพะด ะฒ ัะธััะตะผั
- `POST /auth/register` - ัะตะณะธัััะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปั
- `POST /auth/refresh` - ะพะฑะฝะพะฒะปะตะฝะธะต ัะพะบะตะฝะฐ

### ๐ฐ **ะัะดะถะตัะธัะพะฒะฐะฝะธะต**
- `GET /budget/accounts` - ัะฟะธัะพะบ ััะตัะพะฒ
- `POST /budget/accounts` - ัะพะทะดะฐะฝะธะต ััะตัะฐ
- `GET /budget/categories` - ัะฟะธัะพะบ ะบะฐัะตะณะพัะธะน
- `POST /budget/categories` - ัะพะทะดะฐะฝะธะต ะบะฐัะตะณะพัะธะธ
- `GET /budget/transactions` - ัะฟะธัะพะบ ััะฐะฝะทะฐะบัะธะน
- `POST /budget/transactions` - ัะพะทะดะฐะฝะธะต ััะฐะฝะทะฐะบัะธะธ
- `GET /budget/summary/month` - ะผะตัััะฝะฐั ัะฒะพะดะบะฐ
- `GET /budget/summary/charts` - ะดะฐะฝะฝัะต ะดะปั ะณัะฐัะธะบะพะฒ

### ๐ **ะะฑัะทะฐัะตะปัััะฒะฐ**
- `GET /budget/obligations` - ัะฟะธัะพะบ ะพะฑัะทะฐัะตะปัััะฒ
- `POST /budget/obligations` - ัะพะทะดะฐะฝะธะต ะพะฑัะทะฐัะตะปัััะฒะฐ
- `GET /budget/obligation-blocks` - ะฑะปะพะบะธ ะพะฑัะทะฐัะตะปัััะฒ (ะบัะตะดะธัั)
- `POST /budget/obligation-blocks` - ัะพะทะดะฐะฝะธะต ะฑะปะพะบะฐ ะพะฑัะทะฐัะตะปัััะฒะฐ
- `PUT /budget/obligation-blocks/{id}` - ะพะฑะฝะพะฒะปะตะฝะธะต ะฑะปะพะบะฐ
- `DELETE /budget/obligation-blocks/{id}` - ัะดะฐะปะตะฝะธะต ะฑะปะพะบะฐ

### ๐ฆ **ะะฝะฒะตััะธัะธะธ** (ัะตัะตะท Tinkoff API)
- `GET /portfolio` - ะฟะพัััะตะปั ะฟะพะปัะทะพะฒะฐัะตะปั
- `GET /market/instruments` - ะธะฝััััะผะตะฝัั ััะฝะบะฐ
- `GET /market/candles` - ัะฒะตัะธ ะฟะพ ะธะฝััััะผะตะฝัะฐะผ

### ๐ฅ **ะกะธััะตะผะฐ**
- `GET /health/ping` - ะฟัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั API
- `GET /users/me` - ะธะฝัะพัะผะฐัะธั ะพ ัะตะบััะตะผ ะฟะพะปัะทะพะฒะฐัะตะปะต

---

## URL-ั ะธ ะทะดะพัะพะฒัะต

- **ะัะพะฒะตัะบะฐ API**: `GET /health/ping` โ `{"status":"ok"}`
- **ะคัะพะฝัะตะฝะด**: SPA ะฝะฐ ัะธััะพะผ HTML/JS/CSS (`app/frontend`)
  - `/` - ะธะฝะฒะตััะธัะธะธ (index.html)
  - `/budget.html` - ะฑัะดะถะตัะธัะพะฒะฐะฝะธะต
  - `/obligations.html` - ะพะฑัะทะฐัะตะปัััะฒะฐ
  - `/login.html` - ะฐะฒัะพัะธะทะฐัะธั

---

## ะะฐะบ ะฟัะพะฒะตัะธัั Redis

**ะะฝัััะธ Redisโะบะพะฝัะตะนะฝะตัะฐ:**
```bash
docker exec -it bigs-redis redis-cli ping      # -> PONG
docker exec -it bigs-redis redis-cli setex test:foo 10 bar
docker exec -it bigs-redis redis-cli get test:foo
```

**ะะท backendโะบะพะฝัะตะนะฝะตัะฐ (ัะตัะตะท Python):**
```bash
docker exec -i bigs-backend python - <<'PY'
import os, asyncio
import redis.asyncio as redis
url = os.environ.get('REDIS_URL','redis://bigs-redis:6379/0')
async def main():
    r = redis.from_url(url, encoding="utf-8", decode_responses=True)
    await r.setex("test:from_backend", 20, "ok-from-backend")
    print("value:", await r.get("test:from_backend"))
    await r.aclose()
asyncio.run(main())
PY
```

---

## ะะตะฟะปะพะน ะฝะฐ ัะตัะฒะตั

**ะัะตะดะฟะพััะปะบะธ:** ะตััั ะดะพะผะตะฝ `avolkovshop.ru`, DNS ะฝะฐ ัะตัะฒะตั, ะพัะบัััั ะฟะพััั 80/443.

1) **ะกะบะพะฟะธััะน ะฟัะพะตะบั** ะฝะฐ ัะตัะฒะตั ะธ ัะพะทะดะฐะน `.env` (ะฑะพะตะฒะพะน):
```env
POSTGRES_USER=bigs
POSTGRES_PASSWORD=bigs_pass
POSTGRES_DB=bigsdb
DATABASE_URL=postgresql+psycopg2://bigs:bigs_pass@db:5432/bigsdb

REDIS_URL=redis://bigs-redis:6379/0
SECRET_KEY=super_secret_key
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080

# ะะฐะทัะตััะฝะฝัะต ััะพะฝัั (ะดะพะฑะฐะฒั ัะฒะพะน ะดะพะผะตะฝ/IP):
ALLOWED_ORIGINS=http://localhost:8080,http://127.0.0.1:8080,https://avolkovshop.ru

BACKEND_PORT=8000
APP_PORT=8080
TZ=Europe/Moscow
DEBUG=False
LOG_LEVEL=INFO
```

2) **ะัะพะฒะตัั `nginx.conf`** (ะฟัะพะด): ะฒ ะบะพัะฝะต ัะตะฟะพ. ะ ะฝัะผ:
- 80 โ ัะตะดะธัะตะบั ะฝะฐ HTTPS
- 443 โ ััะฐัะธะบะฐ ะธะท ัะพะผะฐ `frontend_volume`, ะฟัะพะบัะธ ะฝะฐ `bigs-backend:8000`
- ะกะตััะธัะธะบะฐัั: `/etc/letsencrypt/live/avolkovshop.ru/...`

3) **ะะตัะฒะธัะฝัะน ะทะฐะฟััะบ ะฑะตะท SSL (ะธะปะธ ั ะฟััััะผะธ ัะตััะธัะธะบะฐัะฐะผะธ)**, ััะพะฑั ะฟะพะปััะธัั webroot ะดะปั certbot:
```bash
docker compose -f docker-compose.production.yml up -d
```

4) **ะัะฟัััะธ ัะตััะธัะธะบะฐั (webroot `/var/www/certbot`)**:
```bash
docker run --rm -it \
  -v "$(pwd)/certbot/conf:/etc/letsencrypt" \
  -v "$(pwd)/certbot/www:/var/www/certbot" \
  certbot/certbot certonly --webroot -w /var/www/certbot \
  -d avolkovshop.ru -d www.avolkovshop.ru --agree-tos -m you@example.com --non-interactive
```

5) **ะะตัะตะทะฐะฟัััะธ nginx**, ััะพะฑั ะฟะพะดัะฒะฐัะธะป ัะตััะธัะธะบะฐัั:
```bash
docker compose -f docker-compose.production.yml restart nginx
```

ะก ััะพะณะพ ะผะพะผะตะฝัะฐ ัะฐะนั ัะฐะฑะพัะฐะตั ะฟะพ HTTPS. `certbot` ะผะพะถะฝะพ ะทะฐะฟััะบะฐัั ัะฐะท ะฒ ~60 ะดะฝะตะน ะดะปั ะพะฑะฝะพะฒะปะตะฝะธั:
```bash
docker run --rm -it \
  -v "$(pwd)/certbot/conf:/etc/letsencrypt" \
  -v "$(pwd)/certbot/www:/var/www/certbot" \
  certbot/certbot renew --webroot -w /var/www/certbot
```

---

## ะะฑะฝะพะฒะปะตะฝะธะต ัะตะปะธะทะฐ

### ะะฐัะธะฐะฝั A: ะพะฑัะฐะทั ะฝะฐ Docker Hub
1) ะะพะบะฐะปัะฝะพ ัะพะฑัะฐัั ะธ ะทะฐะฟััะธัั:
```bash
# backend
docker build -t YOUR_DH/bigs_backend:latest -f env/backend/Dockerfile .
docker push YOUR_DH/bigs_backend:latest

# frontend (ะตัะปะธ ัะฟะฐะบะพะฒัะฒะฐะตัั ะฒ ะพะฑัะฐะท)
docker build -t YOUR_DH/bigs_frontend:latest -f env/frontend/Dockerfile .
docker push YOUR_DH/bigs_frontend:latest
```

2) ะะฐ ัะตัะฒะตัะต:
```bash
docker compose -f docker-compose.production.yml pull
docker compose -f docker-compose.production.yml up -d
```

### ะะฐัะธะฐะฝั B: ัะฑะพัะบะฐ ะฝะฐ ัะตัะฒะตัะต
```bash
docker compose -f docker-compose.production.yml up -d --build
```

---

## ะััะฝัะต ะบะพะผะฐะฝะดั

- **ะะพะณะธ:**
```bash
docker logs -f bigs-backend
docker logs -f bigs-nginx
docker logs -f bigs-db
```

- **ะัะพะฒะตัะบะฐ ะฐะบัะธะฒะฝะพะน ะบะพะฝัะธะณััะฐัะธะธ nginx (prod):**
```bash
docker exec -it bigs-nginx nginx -T
```

- **ะััะฝะพะน ะฟัะพะณะพะฝ ะผะธะณัะฐัะธะน (ะฟะพะฒัะพัะฝะพ):**
```bash
docker compose run --rm cli-flyway migrate
```

- **ะะตะทะตัะฒะฝัะต ะบะพะฟะธะธ ะะ:**
```bash
# dump
docker exec -t bigs-db pg_dump -U "$POSTGRES_USER" -d "$POSTGRES_DB" > backup.sql
# restore (ะฒะฝะธะผะฐัะตะปัะฝะพ! ะฟะตัะตะทะฐะฟะธัะตั ะดะฐะฝะฝัะต)
cat backup.sql | docker exec -i bigs-db psql -U "$POSTGRES_USER" -d "$POSTGRES_DB"
```

---

## ะขัะฐะฑะปัััะธะฝะณ

- **ะะพัั 80/443 ะทะฐะฝัั** โ ะพััะฐะฝะพะฒะธ ะดััะณะพะน nginx ะธะปะธ ะธะทะผะตะฝัะน publishโะฟะพััั.
- **nginx ะฝะต ะฒะธะดะธั ัะตััะธัะธะบะฐัั** โ ะฟัะพะฒะตัั, ััะพ ัะฐะนะปั ะฟะพัะฒะธะปะธัั ะฒ `./certbot/conf/live/avolkovshop.ru/` ะธ ัะพะผ ัะผะพะฝัะธัะพะฒะฐะฝ ะฒ ะบะพะฝัะตะนะฝะตั.
- **Redisโะพัะธะฑะบะฐ ะฟะพะดะบะปััะตะฝะธั** โ ะฟัะพะฒะตัั `REDIS_URL` ะธ ัะตัั compose: ะบะพะฝัะตะนะฝะตั `backend` ะดะพะปะถะตะฝ ัะตะทะพะปะฒะธัั `bigs-redis`.
- **ะะฐะทะฐ ยซะฟัััะฐัยป** โ ะฟะพัะผะพััะธ ะปะพะณะธ `cli-flyway`. ะะธะณัะฐัะธะธ ะดะพะปะถะฝั ะฟัะพะนัะธ ะดะพ ััะฐััะฐ `backend`.
- **CORS** โ ะดะพะฑะฐะฒั ะดะพะผะตะฝ ััะพะฝัะฐ ะฒ `ALLOWED_ORIGINS`.
- **ะกัะฐัะธะบะฐ ะฝะต ะพะฑะฝะพะฒะปัะตััั** (prod) โ ะฟัะพะฒะตัั, ััะพ `frontend` ะฟะพะปะพะถะธะป ัะฐะนะปั ะฒ ัะพะผ `frontend_volume`, ะธ `nginx` ะธัะฟะพะปัะทัะตั ะธะผะตะฝะฝะพ ะตะณะพ.

---

## ะกัััะบัััะฐ ัะตะฟะพะทะธัะพัะธั

```
.
โโ app/
โ  โโ backend/                # FastAPI Backend
โ  โ  โโ core/                # ะัะฝะพะฒะฝัะต ะบะพะผะฟะพะฝะตะฝัั
โ  โ  โ  โโ auth.py           # JWT ะฐััะตะฝัะธัะธะบะฐัะธั
โ  โ  โ  โโ cache.py          # Redis ะบััะธัะพะฒะฐะฝะธะต
โ  โ  โ  โโ config.py         # ะะฐัััะพะนะบะธ ะฟัะธะปะพะถะตะฝะธั
โ  โ  โ  โโ security.py       # ะะตะทะพะฟะฐัะฝะพััั
โ  โ  โโ api/                 # API ัะฝะดะฟะพะธะฝัั
โ  โ  โ  โโ budget_accounts.py      # ะฃะฟัะฐะฒะปะตะฝะธะต ััะตัะฐะผะธ
โ  โ  โ  โโ budget_categories.py    # ะะฐัะตะณะพัะธะธ ะดะพัะพะดะพะฒ/ัะฐััะพะดะพะฒ
โ  โ  โ  โโ budget_transactions.py  # ะขัะฐะฝะทะฐะบัะธะธ
โ  โ  โ  โโ budget_summary.py       # ะกะฒะพะดะบะธ ะธ ะฐะฝะฐะปะธัะธะบะฐ
โ  โ  โ  โโ budget_obligations.py   # ะัะพัััะต ะพะฑัะทะฐัะตะปัััะฒะฐ
โ  โ  โ  โโ budget_obligation_blocks.py # ะัะตะดะธัะฝัะต ะฑะปะพะบะธ
โ  โ  โโ models/              # SQLAlchemy ะผะพะดะตะปะธ
โ  โ  โ  โโ user.py           # ะะพะปัะทะพะฒะฐัะตะปะธ
โ  โ  โ  โโ budget.py         # ะัะดะถะตัะฝัะต ะผะพะดะตะปะธ
โ  โ  โ  โโ instrument.py     # ะะฝะฒะตััะธัะธะพะฝะฝัะต ะธะฝััััะผะตะฝัั
โ  โ  โ  โโ portfolio.py      # ะะพัััะตะปั
โ  โ  โโ routes/              # ะะฐัััััั
โ  โ  โ  โโ auth.py           # ะะฒัะพัะธะทะฐัะธั
โ  โ  โ  โโ users.py          # ะะพะปัะทะพะฒะฐัะตะปะธ
โ  โ  โ  โโ portfolio.py      # ะะพัััะตะปั
โ  โ  โ  โโ market.py         # ะัะฝะพะบ
โ  โ  โโ db/                  # ะะฐะทะฐ ะดะฐะฝะฝัั
โ  โ  โ  โโ base.py           # ะะฐะทะพะฒัะต ะผะพะดะตะปะธ
โ  โ  โ  โโ session.py        # ะกะตััะธะธ ะะ
โ  โ  โโ main.py              # ะขะพัะบะฐ ะฒัะพะดะฐ
โ  โ  โโ app.py               # FastAPI ะฟัะธะปะพะถะตะฝะธะต
โ  โโ frontend/               # Frontend (HTML/CSS/JS)
โ     โโ assets/
โ     โ  โโ css/              # ะกัะธะปะธ
โ     โ  โ  โโ style.css      # ะัะฝะพะฒะฝัะต ััะธะปะธ
โ     โ  โ  โโ critical.css   # ะัะธัะธัะตัะบะธะต ััะธะปะธ
โ     โ  โ  โโ budget.css     # ะกัะธะปะธ ะฑัะดะถะตัะธัะพะฒะฐะฝะธั
โ     โ  โ  โโ obligations.css # ะกัะธะปะธ ะพะฑัะทะฐัะตะปัััะฒ
โ     โ  โ  โโ login.css      # ะกัะธะปะธ ะฐะฒัะพัะธะทะฐัะธะธ
โ     โ  โโ js/               # JavaScript
โ     โ     โโ script.js      # ะัะฝะพะฒะฝะฐั ะปะพะณะธะบะฐ
โ     โ     โโ budget.js      # ะะพะณะธะบะฐ ะฑัะดะถะตัะธัะพะฒะฐะฝะธั
โ     โ     โโ obligations.js # ะะพะณะธะบะฐ ะพะฑัะทะฐัะตะปัััะฒ
โ     โ     โโ login.js       # ะะพะณะธะบะฐ ะฐะฒัะพัะธะทะฐัะธะธ
โ     โ     โโ network-optimizer.js # ะะฟัะธะผะธะทะฐัะธั ัะตัะธ
โ     โโ index.html           # ะะฝะฒะตััะธัะธะธ
โ     โโ budget.html          # ะัะดะถะตัะธัะพะฒะฐะฝะธะต
โ     โโ obligations.html     # ะะฑัะทะฐัะตะปัััะฒะฐ
โ     โโ login.html           # ะะฒัะพัะธะทะฐัะธั
โโ env/
โ  โโ backend/Dockerfile      # Backend ะบะพะฝัะตะนะฝะตั
โ  โโ frontend/Dockerfile     # Frontend ะบะพะฝัะตะนะฝะตั
โ  โโ frontend/local.conf     # ะะพะบะฐะปัะฝัะน nginx
โ  โโ pgsql/
โ     โโ migrations/          # Flyway ะผะธะณัะฐัะธะธ
โ     โโ initdb.sql           # ะะฝะธัะธะฐะปะธะทะฐัะธั ะะ
โ     โโ override.conf        # ะะฐัััะพะนะบะธ PostgreSQL
โโ certbot/                   # SSL ัะตััะธัะธะบะฐัั
โ  โโ conf/                   # Let's Encrypt
โ  โโ www/                    # Webroot
โโ docker-compose.yml         # ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ
โโ docker-compose.production.yml # ะัะพะดะฐะบัะตะฝ
โโ nginx.conf                 # ะัะพะดะฐะบัะตะฝ nginx
โโ .env                       # ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
โโ README.md                  # ะะพะบัะผะตะฝัะฐัะธั
```

---

## ะขะตัะฝะพะปะพะณะธะธ ะธ ะพัะพะฑะตะฝะฝะพััะธ

### ๐ **Backend**
- **FastAPI** - ัะพะฒัะตะผะตะฝะฝัะน ะฒะตะฑ-ััะตะนะผะฒะพัะบ ะดะปั Python
- **SQLAlchemy** - ORM ะดะปั ัะฐะฑะพัั ั ะฑะฐะทะพะน ะดะฐะฝะฝัั
- **PostgreSQL** - ะฝะฐะดะตะถะฝะฐั ัะตะปััะธะพะฝะฝะฐั ะะ
- **Redis** - ะบััะธัะพะฒะฐะฝะธะต ะธ rate limiting
- **JWT** - ะฑะตะทะพะฟะฐัะฝะฐั ะฐััะตะฝัะธัะธะบะฐัะธั
- **Flyway** - ะผะธะณัะฐัะธะธ ะฑะฐะทั ะดะฐะฝะฝัั

### ๐จ **Frontend**
- **Vanilla JavaScript** - ะฑะตะท ััะตะนะผะฒะพัะบะพะฒ, ะฑััััะฐั ะทะฐะณััะทะบะฐ
- **CSS Grid/Flexbox** - ัะพะฒัะตะผะตะฝะฝะฐั ะฒะตัััะบะฐ
- **Chart.js** - ะบัะฐัะธะฒัะต ะณัะฐัะธะบะธ ะธ ะดะธะฐะณัะฐะผะผั
- **Axios** - HTTP ะบะปะธะตะฝั ะดะปั API
- **Critical CSS** - ะพะฟัะธะผะธะทะฐัะธั ะทะฐะณััะทะบะธ
- **PWA ะณะพัะพะฒะฝะพััั** - ะผะตัะฐ-ัะตะณะธ ะดะปั ะผะพะฑะธะปัะฝัั

### ๐ **ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั**
- **Docker ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั** - ะฑัััััะน ะดะตะฟะปะพะน
- **Nginx** - ะฑััััะฐั ัะฐะทะดะฐัะฐ ััะฐัะธะบะธ
- **Redis ะบััะธัะพะฒะฐะฝะธะต** - ััะบะพัะตะฝะธะต ะทะฐะฟัะพัะพะฒ
- **ะะฟัะธะผะธะทะธัะพะฒะฐะฝะฝัะต ะทะฐะฟัะพัั** - ะธะฝะดะตะบัั ะะ
- **Lazy loading** - ะฐัะธะฝััะพะฝะฝะฐั ะทะฐะณััะทะบะฐ ัะตััััะพะฒ

### ๐ **ะะตะทะพะฟะฐัะฝะพััั**
- **HTTPS** - ัะธััะพะฒะฐะฝะธะต ััะฐัะธะบะฐ
- **JWT ัะพะบะตะฝั** - ะฑะตะทะพะฟะฐัะฝะฐั ะฐััะตะฝัะธัะธะบะฐัะธั
- **Rate limiting** - ะทะฐัะธัะฐ ะพั ะฐัะฐะบ
- **CORS** - ะบะพะฝััะพะปะธััะตะผัะต ะทะฐะฟัะพัั
- **ะะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั** - Pydantic ััะตะผั

---

**ะะพัะพะฒะพ.** ะัะปะธ ััะพ-ัะพ ะฝะต ะฒะทะปะตัะฐะตั โ ัะผะพััะธ ะปะพะณะธ ะบะพะฝัะตะนะฝะตัะพะฒ ะธ ะฐะบัะธะฒะฝัั ะบะพะฝัะธะณััะฐัะธั `nginx -T`.
